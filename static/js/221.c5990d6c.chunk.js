"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[221],{678:function(e,a,t){t(791);var n=t(184);a.Z=function(e){var a=e.currentPage,t=e.totalPages,r=e.onLoadMore;return(0,n.jsx)("div",{className:"load-more",children:(0,n.jsx)("button",{disabled:a>=t,onClick:r,children:"Load More"})})}},242:function(e,a,t){t(791);var n=t(184);a.Z=function(e){var a=e.movie,t=e.setModalData;return(0,n.jsxs)("div",{className:"card",onClick:function(){t(a)},children:[(0,n.jsx)("img",{className:"card_img",src:"https://image.tmdb.org/t/p/w400".concat(a.poster_path),alt:a.title}),(0,n.jsxs)("p",{className:"card_title",children:[a.title," ",(0,n.jsx)("br",{}),(0,n.jsx)("span",{className:"card_text",children:a.release_date})]})]})}},221:function(e,a,t){t.r(a);var n=t(439),r=t(791),c=t(689),o=t(242),s=t(678),i=t(709),u=t(4),l=t(184),d="9d52264b8376313698d7d20c165a8537",v="https://api.themoviedb.org";a.default=function(){var e=(0,r.useState)(""),a=(0,n.Z)(e,2),t=a[0],f=a[1],p=(0,r.useState)(1),g=(0,n.Z)(p,2),h=g[0],m=g[1],x=(0,r.useState)(0),S=(0,n.Z)(x,2),j=S[0],_=S[1],y=(0,r.useState)(""),Z=(0,n.Z)(y,2),k=Z[0],b=Z[1],w=(0,u.l)().setModalData,N=(0,i.Z)(k),q=N.data,C=N.loading,M=N.error,P=(0,c.TH)(),L=(0,c.s0)();(0,r.useEffect)((function(){var e=new URLSearchParams(P.search),a=e.get("query"),t=e.get("page");a&&(f(a),m(parseInt(t)||1),b("".concat(v,"/3/search/movie?api_key=").concat(d,"&query=").concat(a,"&language=en-US&page=").concat(t||1,"&include_adult=false")))}),[P.search]),(0,r.useEffect)((function(){q&&_(q.total_pages)}),[q]);return(0,l.jsxs)("div",{className:"movies",children:[(0,l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(1);var a="".concat(v,"/3/search/movie?api_key=").concat(d,"&query=").concat(t,"&language=en-US&page=1&include_adult=false");b(a),L("/movies?query=".concat(t,"&page=1"))},children:[(0,l.jsx)("input",{type:"text",value:t,onChange:function(e){return f(e.target.value)},placeholder:"Search for movies..."}),(0,l.jsx)("button",{type:"submit",children:"Search"})]}),C&&(0,l.jsx)("p",{children:"Loading..."}),M&&(0,l.jsx)("p",{children:"Error loading movies."}),(0,l.jsx)("div",{className:"gallery",children:q&&q.results.map((function(e){return(0,l.jsx)("div",{onClick:function(){return function(e){var a={query:t,currentPage:h};console.log("Saving state to localStorage:",a),localStorage.setItem("moviesState",JSON.stringify(a)),L("/movies/".concat(e))}(e.id)},children:(0,l.jsx)(o.Z,{movie:e,setModalData:w})},e.id)}))}),q&&q.results.length>0&&(0,l.jsx)(s.Z,{currentPage:h,totalPages:j,onLoadMore:function(){var e=h+1;m(e);var a="".concat(v,"/3/search/movie?api_key=").concat(d,"&query=").concat(t,"&language=en-US&page=").concat(e,"&include_adult=false");b(a),L("/movies?query=".concat(t,"&page=").concat(e))}})]})}},709:function(e,a,t){var n=t(861),r=t(439),c=t(757),o=t.n(c),s=t(791),i=t(759);a.Z=function(e){var a=(0,s.useState)(null),t=(0,r.Z)(a,2),c=t[0],u=t[1],l=(0,s.useState)(!0),d=(0,r.Z)(l,2),v=d[0],f=d[1],p=(0,s.useState)(null),g=(0,r.Z)(p,2),h=g[0],m=g[1];return(0,s.useEffect)((function(){if(e){var a=function(){var a=(0,n.Z)(o().mark((function a(){var t;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i.Z.get(e);case 3:t=a.sent,u(t.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),m(a.t0);case 10:return a.prev=10,f(!1),a.finish(10);case 13:case"end":return a.stop()}}),a,null,[[0,7,10,13]])})));return function(){return a.apply(this,arguments)}}();a()}}),[e]),{data:c,loading:v,error:h}}}}]);
//# sourceMappingURL=221.c5990d6c.chunk.js.map